<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Mar 16, 2011 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>HTTP Builder - Authentication</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20110316" />
    <meta http-equiv="Content-Language" content="en" />
                                                    
<link rel="stylesheet" type="text/css" href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css" media="all"/>
                                                        
<link rel="stylesheet" type="text/css" href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeFadeToGrey.css" media="all"/>
                                                        
<style>#bodyColumn { max-width: 840px }</style>
                                                        
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" language="javascript"></script>
                                                        
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushGroovy.js" language="javascript"></script>
                                                        
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushXml.js" language="javascript"></script>
                                                        
<script language="javascript">SyntaxHighlighter.defaults['light'] = true;
			 SyntaxHighlighter.all();</script>
                      
  </head>
  <body class="composite">
    <div id="banner">
                  <a href="index.html" id="bannerLeft">
                                                <img src="../images/logo.png" alt="HTTPBuilder" />
                </a>
                        <a href="../../" id="bannerRight">
                                        <img src="http://media.xircles.codehaus.org/_projects/groovy/_logos/medium.png" alt="Groovy" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                
                <div class="xleft">
        <span id="projectVersion">Version: 0.5.2-SNAPSHOT</span>
              </div>
            <div class="xright">        
                
                 <span id="publishDate">Last Published: 2011-03-16</span>
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                
                                <h5>Overview</h5>
                  <ul>
                  <li class="none">
                          <a href="../home.html" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="../index.html" title="News">News</a>
            </li>
                  <li class="none">
                          <a href="../download.html" title="Download">Download</a>
            </li>
                                                                                                                                                                                                                                                                                    <li class="expanded">
                          <a href="../doc/index.html" title="Documentation">Documentation</a>
                    <ul>
                      <li class="none">
                          <a href="../doc/get.html" title="GET Examples">GET Examples</a>
            </li>
                      <li class="none">
                          <a href="../doc/post.html" title="POST Examples">POST Examples</a>
            </li>
                      <li class="none">
                          <a href="../doc/json.html" title="Using JSON">Using JSON</a>
            </li>
                      <li class="none">
                          <a href="../doc/xml.html" title="Using XML">Using XML</a>
            </li>
                      <li class="none">
                          <a href="../doc/rest.html" title="RESTClient">RESTClient</a>
            </li>
                      <li class="none">
                          <a href="../doc/async.html" title="AsyncHTTPBuilder">AsyncHTTPBuilder</a>
            </li>
                      <li class="none">
                          <a href="../doc/httpurlclient.html" title="HttpURLClient">HttpURLClient</a>
            </li>
                      <li class="none">
            <strong>Authentication</strong>
          </li>
                      <li class="none">
                          <a href="../doc/contentTypes.html" title="Content Types">Content Types</a>
            </li>
                      <li class="none">
                          <a href="../doc/handlers.html" title="Response Handlers">Response Handlers</a>
            </li>
                      <li class="none">
                          <a href="../doc/uribuilder.html" title="URIBuilder">URIBuilder</a>
            </li>
                      <li class="none">
                          <a href="../doc/ssl.html" title="SSL">SSL</a>
            </li>
              </ul>
        </li>
                  <li class="none">
                          <a href="../apidocs/index.html" title="JavaDoc">JavaDoc</a>
            </li>
                  <li class="none">
                          <a href="../changes.html" title="Changelog">Changelog</a>
            </li>
                  <li class="none">
                          <a href="../contrib.html" title="Contributions">Contributions</a>
            </li>
                  <li class="none">
                          <a href="http://twitter.com/httpbuilder" class="externalLink" title="On Twitter!">On Twitter!</a>
            </li>
                  <li class="none">
                          <a href="https://www.ohloh.net/p/http-builder" class="externalLink" title="On Ohloh">On Ohloh</a>
            </li>
                  <li class="none">
                          <a href="../home.html#Support" title="Support">Support</a>
            </li>
                  <li class="none">
                          <a href="http://blog.thomnichols.org/" class="externalLink" title="Blog">Blog</a>
            </li>
                  <li class="none">
                          <a href="../about.html" title="About">About</a>
            </li>
          </ul>
                       <h5>Additional Reference</h5>
                  <ul>
                  <li class="none">
                          <a href="../../../Documentation" title="Groovy">Groovy</a>
            </li>
                  <li class="none">
                          <a href="http://www.w3.org/Protocols/rfc2616/rfc2616.html" class="externalLink" title="HTTP/1.1 RFC">HTTP/1.1 RFC</a>
            </li>
                  <li class="none">
                          <a href="http://hc.apache.org/httpcomponents-client/" class="externalLink" title="HttpClient">HttpClient</a>
            </li>
                  <li class="none">
                          <a href="http://hc.apache.org/httpcomponents-core/" class="externalLink" title="HttpCore">HttpCore</a>
            </li>
                  <li class="none">
                          <a href="http://json-lib.sourceforge.net/" class="externalLink" title="JSON-Lib">JSON-Lib</a>
            </li>
                  <li class="none">
                          <a href="http://nekohtml.sourceforge.net/" class="externalLink" title="NekoHTML">NekoHTML</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                        <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                            <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                                                                                                                   <a href="http://maven.apache.org/" title="Maven" class="poweredBy">
        <img class="poweredBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
                                                                                                    <a href="http://www.ohloh.net/p/http-builder" title="Ohloh" class="poweredBy">
        <img class="poweredBy"  alt="Ohloh" src="http://www.ohloh.net/p/http-builder/widgets/project_thin_badge.gif"    />
      </a>
                       
                
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Authentication<a name="Authentication"></a></h2><p>HTTPBuilder supports a number of authentication mechanisms natively, to make working with protected sites as simple as possible.</p><div class="section"><h3>Basic Authentication<a name="Basic_Authentication"></a></h3><p>Basic auth isn't terribly complicated in Apache HttpClient, but it's dead-simple in HTTPBuilder:</p><pre class="brush: groovy">def authSite = new HTTPBuilder( 'https://some-protected-site.com/' )
authSite.auth.basic 'myUserName', 'myPassword'

secrets = authSite.get( path:'secret-info.txt' )
</pre><p>When a request is made, the server will respond with a 401 status and a <tt>WWW-Authenticate</tt> header, indicating that authorization is required. HTTPBuilder will then re-request with the proper <tt>Authorization</tt> header containing your credentials. This is all transparent to the developer, as it simply appears that the first request completed successfully. </p><p>See the <a class="externalLink" href="http://hc.apache.org/httpcomponents-client-ga/tutorial/html/authentication.html">HTTPClient authentication doc</a> for more details.</p></div><div class="section"><h3>OAuth Support<a name="OAuth_Support"></a></h3><p><a class="externalLink" href="http://oauth.net">OAuth</a> is supported in HTTPBuilder since version 0.5.1. Support is provided by the <a class="externalLink" href="http://code.google.com/p/oauth-signpost/">Signpost framework</a> in HTTPBuilder, RESTClient and HttpURLClient.</p><div class="section"><h4>Obtaining an Access Token Pair<a name="Obtaining_an_Access_Token_Pair"></a></h4><p>The Signpost documentation contains <a class="externalLink" href="http://code.google.com/p/oauth-signpost/wiki/TwitterAndSignpost">an example</a> of how to obtain access tokens out-of-band. It's not completely straightforward, but it can be made significantly easier by using an interactive Groovy shell session. This allows execution to pause while you switch to your browser to access the validation URL. Below is an example:</p><pre class="brush: groovy">groovy:000&gt; import oauth.signpost.basic.*
===&gt; [import oauth.signpost.*, import oauth.signpost.basic.*]
groovy:000&gt; consumer = new DefaultOAuthConsumer('&lt;YOUR CONSUMER KEY HERE&gt;', '&lt;YOUR CONSUMER SECRET HERE&gt;')
===&gt; oauth.signpost.basic.DefaultOAuthConsumer@67f6dc61
groovy:000&gt; provider = new DefaultOAuthProvider(
groovy:001&gt;                 &quot;http://twitter.com/oauth/request_token&quot;,
groovy:002&gt;                 &quot;http://twitter.com/oauth/access_token&quot;,
groovy:003&gt;                 &quot;http://twitter.com/oauth/authorize&quot;);
===&gt; oauth.signpost.basic.DefaultOAuthProvider@1b2dd1b8
groovy:000&gt; provider.retrieveRequestToken(consumer, OAuth.OUT_OF_BAND);
===&gt; 'http://twitter.com/oauth/authorize?oauth_token=t66pPODPkOxnfEPZqziXp4xU7X4ByplHUFiFN5ylIA'
groovy:000&gt; // copy the above line, paste it in your browser; Twitter will ask you to authorize...
groovy:000&gt; provider.retrieveAccessToken(consumer, '&lt;PIN NUMBER FROM BROWSER&gt;')
===&gt; null
groovy:000&gt; println consumer.token
&lt;YOUR ACCESS TOKEN&gt;
===&gt; null
groovy:000&gt; println consumer.tokenSecret
&lt;YOUR SECRET TOKEN&gt;
===&gt; null
</pre><p>Your app will now be authorized to make requests on behalf of the user that was logged in when you accessed the given URL in your browser. Now that you have your consumer key, consumer secret, access token an access key, give all four values to HTTPBuilder like so:</p><pre class="brush: groovy">def twitter = new RESTClient( 'https://twitter.com/statuses/' )
twitter.auth.oauth consumerKey, consumerSecret, accessToken, secretToken

assert twitter.get( path : 'public_timeline.json' ).status == 200

// in HttpURLClient:
def twitter = new HttpURLClient(url:'https://twitter.com/statuses/')

http.setOAuth consumerKey, consumerSecret, accessToken, secretToken 
assert twitter.request( path : 'public_timeline.json' ).status == 200
</pre></div><div class="section"><h4>A final note about OAuth<a name="A_final_note_about_OAuth"></a></h4><p>Unlike basic auth and other schemes supported natively by HttpClient, OAuth does <i>not</i> wait for a <tt>WWW-Authenticate</tt> challenge from the server before signing a request, and OAuth cannot be configured for multiple domains in a single HTTPBuilder client. The means that once you call <tt>http.auth.oauth()</tt>, request signing is effectively 'turned on' for every request you make with that HTTPBuilder instance. If you want to <i>stop</i> signing requests, call <tt>http.auth.oauth(null,'','','')</tt>.</p></div></div><div class="section"><h3>Other Auth Mechanisms<a name="Other_Auth_Mechanisms"></a></h3><p>HTTPBuilder and RESTClient also support 'Digest' and certificate authentication out-of-the-box, which simply exposes the underlying features present in Apache HttpClient. See the <a href="../apidocs/groovyx/net/http/AuthConfig.html">AuthConfig javadoc</a> for a list of all authentication schemes supported. Currently HttpURLClient only supports 'Basic' and 'OAuth' authentication.</p></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">Copyright &#169;                   2008-2011.
          All Rights Reserved.      
                
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
